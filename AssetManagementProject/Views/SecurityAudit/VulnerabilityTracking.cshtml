@{
    ViewData["Title"] = "Vulnerability Tracking";
    Layout = null;
}

<style>
    .vulnerability-container {
        max-width: 1000px;
        margin: auto;
        padding: 20px;
        font-family: Arial, sans-serif;
    }

    .header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    h2 {
        color: white;
    }

    .add-btn {
        padding: 10px 20px;
        border: none;
        margin: 0 10px;
        border-radius: 8px;
        background-color: #007bff;
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease;
    }

        .add-btn:hover {
            background-color: #0056b3;
        }

    #vulnerabilityForm {
        transform: scaleY(0);
        opacity: 0;
        transform-origin: top;
        transition: transform 0.3s ease, opacity 0.3s ease;
        overflow: hidden;
        margin-top: 20px;
    }

        #vulnerabilityForm.show {
            transform: scaleY(1);
            opacity: 1;
        }

    form input, form textarea, form select {
        display: block;
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }

    .table-container {
        margin-top: 30px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }

    table, th, td {
        border: 1px solid #aaa;
    }

    th, td {
        padding: 10px;
        text-align: left;
    }
</style>

<div class="vulnerability-container">
    <div class="header-row">
        <h2>Vulnerability Tracking</h2>
        <button class="add-btn" onclick="toggleVulForm()">+ Add Vulnerability</button>
    </div>

    <!-- Hidden Form -->
    <div id="vulnerabilityForm">
        <form method="post" asp-controller="Vulnerability" asp-action="Add">
            <input type="text" name="AssetName" placeholder="Asset Name" required />
            <input type="text" name="VulnerabilityType" placeholder="Vulnerability Type" required />
            <textarea name="Description" placeholder="Description" rows="3" required></textarea>
            <select name="Severity" required>
                <option value="">Select Severity</option>
                <option>Low</option>
                <option>Medium</option>
                <option>High</option>
                <option>Critical</option>
            </select>
            <button type="submit" class="add-btn">Submit</button>
        </form>
    </div>

    <!-- Table of added vulnerabilities -->
    <div class="table-container">
        <h3>Existing Vulnerabilities</h3>
        <table>
            <thead>
                <tr>
                    <th>Asset</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Severity</th>
                </tr>
            </thead>
            <tbody>
                <!-- Example row — replace with your model loop -->
                <tr>
                    <td>Server 1</td>
                    <td>SQL Injection</td>
                    <td>Unsanitized input in login form</td>
                    <td>High</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    function toggleVulForm() {
        const form = document.getElementById("vulnerabilityForm");
        form.classList.toggle("show");
    }
</script>
